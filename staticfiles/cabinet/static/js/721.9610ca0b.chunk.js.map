{"version":3,"file":"static/js/721.9610ca0b.chunk.js","mappings":"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","sources":["views/pages/login/Login.js","../node_modules/@coreui/icons/js/free/cil-lock-locked.js","views/pages/login/LoginForm.js","../node_modules/@coreui/icons/js/free/cil-user.js"],"sourcesContent":["import React from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CRow,\n} from '@coreui/react'\nimport LoginForm from './LoginForm'\n\nconst Login = () => {\n  const Logo = process.env.REACT_APP_LOGO;\n\n  return (\n    <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md={8}>\n            <CCardGroup>\n              <LoginForm />\n              <CCard className=\"text-white py-5\" style={{ width: '100%', backgroundColor: \"#6CB200\" }}>\n                <CCardBody className=\"d-flex justify-content-center align-items-center\">\n                    <img src={Logo} className='w-100' />\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default Login\n","export const cilLockLocked = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>\"]","import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  CInputGroupText,\n  CRow,\n  CAlert,\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport { cilLockLocked, cilUser } from \"@coreui/icons\";\nimport axios from \"axios\";\nimport AxiosInstance from \"src/components/Axios\";\n\nconst LoginForm = (props) => {\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [visibleError, setVisibleError] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    const ok = form.checkValidity() !== false;\n    setValidated(true);\n\n    if (!ok) return;\n\n    try {\n      setVisibleError(false);\n\n      const body = {\n        username: login,\n        password: password,\n      };\n\n      // Django JWT login\n      const res = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL}/api/auth/login/`,\n        body,\n        { headers: { \"Content-Type\": \"application/json\" } }\n      );\n\n      // simplejwt -> access/refresh\n      if (!res?.data?.access) {\n        setVisibleError(true);\n        return;\n      }\n\n      localStorage.setItem(\"access_token\", res.data.access);\n      localStorage.setItem(\"refresh_token\", res.data.refresh || \"\");\n\n      // отримати дані користувача\n      const meRes = await AxiosInstance.get(\"/users/me/\");\n      localStorage.setItem(\"user_data\", JSON.stringify(meRes.data));\n\n      if (props.redirect !== undefined) {\n        window.location.reload();\n      } else {\n        window.location.replace(\"/\");\n      }\n    } catch (e) {\n      console.log(\"LOGIN ERROR:\", e);\n      setVisibleError(true);\n    }\n  };\n\n  return (\n    <CCard className=\"p-4\">\n      <CCardBody>\n        <CAlert\n          color=\"danger\"\n          dismissible\n          visible={visibleError}\n          onClose={() => setVisibleError(false)}\n        >\n          Помилка входу! Перевірте введені дані.\n        </CAlert>\n\n        <CForm\n          onSubmit={handleSubmit}\n          className=\"needs-validation\"\n          noValidate\n          validated={validated}\n        >\n          <h1>Увійти</h1>\n          <p className=\"text-medium-emphasis\">Вхід в кабінет</p>\n\n          <CInputGroup className=\"mb-3\">\n            <CInputGroupText>\n              <CIcon icon={cilUser} />\n            </CInputGroupText>\n            <CFormInput\n              placeholder=\"Логін\"\n              autoComplete=\"username\"\n              value={login}\n              onChange={(e) => setLogin(e.target.value)}\n              required\n            />\n          </CInputGroup>\n\n          <CInputGroup className=\"mb-4\">\n            <CInputGroupText>\n              <CIcon icon={cilLockLocked} />\n            </CInputGroupText>\n            <CFormInput\n              type=\"password\"\n              placeholder=\"Пароль\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </CInputGroup>\n\n          <CRow>\n            <CCol xs={6}>\n              <CButton type=\"submit\" color=\"success\" className=\"px-4\">\n                Увійти\n              </CButton>\n            </CCol>\n          </CRow>\n        </CForm>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default LoginForm;\n","export const cilUser = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M411.6,343.656l-72.823-47.334,27.455-50.334A80.23,80.23,0,0,0,376,207.681V128a112,112,0,0,0-224,0v79.681a80.236,80.236,0,0,0,9.768,38.308l27.455,50.333L116.4,343.656A79.725,79.725,0,0,0,80,410.732V496H448V410.732A79.727,79.727,0,0,0,411.6,343.656ZM416,464H112V410.732a47.836,47.836,0,0,1,21.841-40.246l97.66-63.479-41.64-76.341A48.146,48.146,0,0,1,184,207.681V128a80,80,0,0,1,160,0v79.681a48.146,48.146,0,0,1-5.861,22.985L296.5,307.007l97.662,63.479h0A47.836,47.836,0,0,1,416,410.732Z' class='ci-primary'/>\"]"],"names":["Login","Logo","process","REACT_APP_LOGO","_jsx","className","children","CContainer","CRow","CCol","md","_jsxs","CCardGroup","LoginForm","CCard","style","width","backgroundColor","CCardBody","src","cilLockLocked","props","login","setLogin","useState","password","setPassword","validated","setValidated","visibleError","setVisibleError","useNavigate","CAlert","color","dismissible","visible","onClose","CForm","onSubmit","async","event","preventDefault","ok","currentTarget","checkValidity","_res$data","body","username","res","axios","concat","headers","data","access","localStorage","setItem","refresh","meRes","AxiosInstance","get","JSON","stringify","undefined","redirect","window","location","reload","replace","e","console","log","noValidate","CInputGroup","CInputGroupText","CIcon","icon","cilUser","CFormInput","placeholder","autoComplete","value","onChange","target","required","type","xs","CButton"],"ignoreList":[],"sourceRoot":""}
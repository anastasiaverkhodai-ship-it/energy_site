{"version":3,"file":"static/js/481.b320a3b5.chunk.js","mappings":"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","sources":["../node_modules/@coreui/icons/js/free/cil-lock-locked.js","views/pages/login/LoginForm.js","views/pages/page404/Page404.js","../node_modules/@coreui/icons/js/free/cil-user.js"],"sourcesContent":["export const cilLockLocked = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>\"]","import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  CInputGroupText,\n  CRow,\n  CAlert,\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport { cilLockLocked, cilUser } from \"@coreui/icons\";\nimport axios from \"axios\";\nimport AxiosInstance from \"src/components/Axios\";\n\nconst LoginForm = (props) => {\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [visibleError, setVisibleError] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    const ok = form.checkValidity() !== false;\n    setValidated(true);\n\n    if (!ok) return;\n\n    try {\n      setVisibleError(false);\n\n      const body = {\n        username: login,\n        password: password,\n      };\n\n      // Django JWT login\n      const res = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL}/api/auth/login/`,\n        body,\n        { headers: { \"Content-Type\": \"application/json\" } }\n      );\n\n      // simplejwt -> access/refresh\n      if (!res?.data?.access) {\n        setVisibleError(true);\n        return;\n      }\n\n      localStorage.setItem(\"access_token\", res.data.access);\n      localStorage.setItem(\"refresh_token\", res.data.refresh || \"\");\n\n      // отримати дані користувача\n      const meRes = await AxiosInstance.get(\"/users/me/\");\n      localStorage.setItem(\"user_data\", JSON.stringify(meRes.data));\n\n      if (props.redirect !== undefined) {\n        window.location.reload();\n      } else {\n        window.location.replace(\"/\");\n      }\n    } catch (e) {\n      console.log(\"LOGIN ERROR:\", e);\n      setVisibleError(true);\n    }\n  };\n\n  return (\n    <CCard className=\"p-4\">\n      <CCardBody>\n        <CAlert\n          color=\"danger\"\n          dismissible\n          visible={visibleError}\n          onClose={() => setVisibleError(false)}\n        >\n          Помилка входу! Перевірте введені дані.\n        </CAlert>\n\n        <CForm\n          onSubmit={handleSubmit}\n          className=\"needs-validation\"\n          noValidate\n          validated={validated}\n        >\n          <h1>Увійти</h1>\n          <p className=\"text-medium-emphasis\">Вхід в кабінет</p>\n\n          <CInputGroup className=\"mb-3\">\n            <CInputGroupText>\n              <CIcon icon={cilUser} />\n            </CInputGroupText>\n            <CFormInput\n              placeholder=\"Логін\"\n              autoComplete=\"username\"\n              value={login}\n              onChange={(e) => setLogin(e.target.value)}\n              required\n            />\n          </CInputGroup>\n\n          <CInputGroup className=\"mb-4\">\n            <CInputGroupText>\n              <CIcon icon={cilLockLocked} />\n            </CInputGroupText>\n            <CFormInput\n              type=\"password\"\n              placeholder=\"Пароль\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </CInputGroup>\n\n          <CRow>\n            <CCol xs={6}>\n              <CButton type=\"submit\" color=\"success\" className=\"px-4\">\n                Увійти\n              </CButton>\n            </CCol>\n          </CRow>\n        </CForm>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default LoginForm;\n","import React from 'react'\nimport {\n  CCol,\n  CContainer,\n  CRow,\n} from '@coreui/react'\nimport LoginForm from '../login/LoginForm'\n\nconst Page404 = () => {\n  return (\n    <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md={6}>\n            <div className=\"clearfix\">\n            </div>\n            <LoginForm redirect=\"back\"/>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default Page404\n","export const cilUser = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M411.6,343.656l-72.823-47.334,27.455-50.334A80.23,80.23,0,0,0,376,207.681V128a112,112,0,0,0-224,0v79.681a80.236,80.236,0,0,0,9.768,38.308l27.455,50.333L116.4,343.656A79.725,79.725,0,0,0,80,410.732V496H448V410.732A79.727,79.727,0,0,0,411.6,343.656ZM416,464H112V410.732a47.836,47.836,0,0,1,21.841-40.246l97.66-63.479-41.64-76.341A48.146,48.146,0,0,1,184,207.681V128a80,80,0,0,1,160,0v79.681a48.146,48.146,0,0,1-5.861,22.985L296.5,307.007l97.662,63.479h0A47.836,47.836,0,0,1,416,410.732Z' class='ci-primary'/>\"]"],"names":["cilLockLocked","props","login","setLogin","useState","password","setPassword","validated","setValidated","visibleError","setVisibleError","useNavigate","_jsx","CCard","className","children","_jsxs","CCardBody","CAlert","color","dismissible","visible","onClose","CForm","onSubmit","async","event","preventDefault","ok","currentTarget","checkValidity","_res$data","body","username","res","axios","concat","process","headers","data","access","localStorage","setItem","refresh","meRes","AxiosInstance","get","JSON","stringify","undefined","redirect","window","location","reload","replace","e","console","log","noValidate","CInputGroup","CInputGroupText","CIcon","icon","cilUser","CFormInput","placeholder","autoComplete","value","onChange","target","required","type","CRow","CCol","xs","CButton","Page404","CContainer","md","LoginForm"],"ignoreList":[],"sourceRoot":""}